{{ define "main" }}

<header class="page-header" style="margin-bottom:1rem;">
  <h1>{{ .Title }}</h1>

  {{ $all := .RegularPages.ByWeight }}
  <p style="margin-top:.25rem; opacity:.75;">
    共 {{ len $all }} 章
  </p>

  {{ with .Content }}
    <div class="post-content">
      {{ . }}
    </div>
  {{ end }}
</header>

{{ $pages := .RegularPages.ByWeight }}

<ul class="novel-chapter-list" style="list-style:none; padding:0; margin:0;">
  {{ range $pages }}
    <li class="novel-chapter-item"
        style="padding: .9rem 0; border-bottom: 1px solid var(--border);">
      <a href="{{ .RelPermalink }}"
         style="display:block; font-weight:700; font-size:1.05rem; line-height:1.4;">
        第 {{ .Weight }} 章 · {{ .Title }}
      </a>

      <div style="margin-top:.25rem; opacity:.7; font-size:.95rem;">
        {{ .Plain | truncate 10 }}
      </div>
    </li>
  {{ end }}
</ul>

{{ end }}
